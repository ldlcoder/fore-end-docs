本节主要说明项目中通用的一些结构设计，具体项目可以酌情进行调整。

## 目录结构

```
┌─ xxx  项目根目录
│  ├─ api-mock  // mock数据目录
│  │  ├─ index.js // mock目录入口文件
│  │  ├─ modules // mock脚本模块目录
│  │  ├─ api-config.js // 动态接口域名获取文件
│  │  ├─ ...
│  ├─ node_modules // npm包安装目录   
│  ├─ dist  // 项目默认打包目录
│  ├─ public  // vue-cli3脚手架html模板文件目录 
│  │  ├─ index.html  // 模板页面
│  │  ├─ favicon.ico  // 网站图标
│  │  ├─ robots.txt  // 爬虫机器人
│  ├─ src  // 项目主目录
│  │  ├─ api // 项目接口函数定义文件目录
│  │  ├─ common // 项目通用目录 
│  │  │  ├─ commonData // 通用数据文件目录
│  │  │  ├─ components // 通用组件目录
│  │  │  ├─ mixins // 通用mixin目录
│  │  │  ├─ template // 通用模板组件目录
│  │  │  ├─ index.js // 通用文件入口
│  │  ├─ components // 基础组件目录
│  │  ├─ config // 项目配置文件目录
│  │  ├─ layouts // layout布局文件目录
│  │  ├─ mixins // 全局mixins目录
│  │  ├─ plugins // 项目插件文件目录
│  │  ├─ public // 项目共用文件目录
│  │  │  ├─ styles // 样式文件目录
│  │  ├─ router // 路由配置和处理文件目录
│  │  ├─ store // vuex相关文件目录
│  │  ├─ utils // 功能函数文件目录
│  │  ├─ views // 项目视图文件目录
│  │  │  ├─ xxxx // 模块目录
│  │  │  │  ├─ xxxx // 路由组件目录
│  │  ├─ App.vue // 根组件文件
│  │  ├─ main.js // 项目入口文件
│  ├─ .gitignore  // git忽略配置文件
│  ├─ package.json // 项目包管理文件
│  ├─ // 以下文件是vue-cli3项目相关
│  ├─ babel.config.js // babel配置文件
│  ├─ vue.config.js // 脚手架配置文件
```

## 主要结构说明

### api-mock

这个目录主要放置mock文件或脚本，配合`api-mock-plugin`插件使用，可以方便得使用json格式文件来mock接口数据。

然而很多接口可以返回相同得内容（比如提交接口），此外有些接口可以使用固定格式返回数据（比如分页列表接口）。如果给每一个这类接口提供一个json文件，的确不太友好。所以，使用脚本可以方便处理这些场景。当然，使用这些不是无成本得，好在投入是一次性得，而收益是永久得。

具体用法可参见[api-mock-plugin](https://www.npmjs.com/package/@wxhccc/api-mock-plugin)

### public(模板页面目录)

vue-cli3创建得项目主目录下得public目录用于放置项目主模板页面文件。而这个index.html则是打包后页面的模板，当需要添加cdn链接（比如iconfont的css，或者第三方api文件），需要修改这个文件。

另外网站图标也在这个目录下

### package.json

项目主配置文件。所有的依赖包（dependencies）和开发包（devDependencies）都是通过这个文件进行管理的。注意不要把npm包安装错了位置。

::: tip 友情提示
常用npm安装命令
npm i xxxx -D/-S
i 是 install的简写
-D 是 --save-dev的简写，对应devDependencies
-S 是 --save的简写，对应dependencies
:::

此外，如果需要发布npm包，`main`，`key`, `lib`等配置文件也是需要了解的。具体见npm文档。

### src

项目主目录，项目80%内容会在这个目录下

#### api目录
目前的接口管理是使用的函数定义方式，这是一种比较好得实现方式。可以利用模块引入系统使接口清晰，同时可以避免不需要得接口被引入。因为配合了smartfetch这个接口封装库，在定义和使用时都极大程度得降低了复杂度。

::: warning 提示
接口应该严格按照定义文档指定得请求方式发送请求。登录token也最好放置在请求头部
:::

#### common目录
这个目录应该是目前项目里最复杂的模块了。所有项目无法抽取为无场景共用模块/组件的部分全都放置于此。故为了能更好得维护，此目录及子目录得使用应该严谨。

##### components 
业务组件，特定项目内可复用，但跨项目无法使用得。比如tab形式得文件展示组件。严格遵循可复用组件规范。方便他人使用。

##### templates
业务模板组件。组件内还有内部接口处理逻辑。通过传入少量参数可独立工作。整组件可复用，但对props的响应极弱。同时无法脱离项目使用。此类可称为模板（组件）

##### mixins
项目中常见的功能页面的共用方法提取。主要是编辑页，详情页，列表页等。通过mixins方式引入，可以减少大量重复代码的编写。当然缺点也是很明显的，需要查看文件内容才能知道具体用法，文件内容过多（比如listPageMixin）。可以通过文件再拆分和添加说明文档来缓解。

#### router
路由模块定义目录，定义了路由组件的归属和加载方式。同时目录下的处理文件可以将权限数据结合实际路由对象整合成动态路由数组添加到应用中，可有效防止无权限地址访问。此外还会处理菜单数据并应用到系统菜单中，可实现动态菜单功能。

#### utils
功能函数目录，目录下文件仅提供导出的功能函数，按照设计目录可以在任意文件引入并调用。故本目录下的函数应该尽量不要引入vuex或router目录下的内容。防止循环引用。

如果确实需要vuex/router内容，可以通过参数形式传入，然后在需要使用的地方传入。此外，还可以通过运行时绑定上下文来让函数获取其他信息，这种方式也可以避免循环引入。

#### layouts
框架组件目录。框架的意思是指页面的公共布局。例如后台管理界面的常见圣杯结构，或上左下结构，或者全屏页（无布局，仅提供公共功能，比如登录登出）。